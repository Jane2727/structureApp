(this.webpackJsonpstructure_app=this.webpackJsonpstructure_app||[]).push([[0],[,,,,,,,,,,,function(e,t,n){e.exports=n(22)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),i=n.n(c),u=n(1),s=n.n(u),o=n(7),m=n(2),l=n(3),d=n(5),p=n(4),f=n(6);Scorocode.Init({ApplicationID:"3196b2e873234547ad8b06ed636d3538",JavaScriptKey:"5e85f685a23e44e6abad95accc1dd2ea",MasterKey:"659d718ff9664f6fafbdb79efc93cb34"});var v=function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Scorocode.Query("buildings"),e.next=3,t.find();case 3:return n=e.sent,a=n.result,e.abrupt("return",a.map((function(e){var t=e.name,n=e.rooms;return{id:e._id,name:t,children:n}})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Scorocode.Query("equipment"),e.next=3,t.find();case 3:return n=e.sent,a=n.result,e.abrupt("return",a.map((function(e){var t=e.count,n=e.name;return{id:e._id,name:n,count:t,room:e.room}})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=(n(17),function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.child,a=t.count,c=t.selected,i="(".concat(a,")"),u="item";return c&&(u+=" selected"),r.a.createElement("div",{className:u,onClick:function(){return e.props.onClick(n)}},r.a.createElement("span",{className:"item-symbol"}),r.a.createElement("span",{className:"item-name"},n.name),r.a.createElement("span",{className:"item-count"},i))}}]),t}(a.Component)),E=function(e,t){var n=[];return function e(a){if(a.children){if(!n.some((function(e){return e.roomId===a.id}))){var r=a.id,c=a.name,i=t.filter((function(e){return e.room===r&&void 0!==e.count&&void 0!==e.name}));0!==i.length&&n.push({roomId:r,roomName:c,equipInfo:i})}return a.children.map((function(t){return e(t)}))}var u=a.id,s=a.name,o=t.filter((function(e){return e.room===u&&void 0!==e.count&&void 0!==e.name}));return 0!==o.length&&n.push({roomId:u,roomName:s,equipInfo:o}),o}(e),n},O=function(e){return e.reduce((function(e,t){return e+t.equipInfo.reduce((function(e,t){return e+t.count}),0)}),0)},j=(n(18),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).handleClickOnItem=function(e){n.props.itemSelect(e)},n.renderElem=function(e){var t=n.props,a=t.equipments,c=t.selectedItem,i=E(e,a),u=O(i);if(!e.children)return r.a.createElement("div",{key:e.id,name:e.name,className:"list-elem"},r.a.createElement(b,{child:e,count:u,onClick:n.handleClickOnItem,selected:e.id===c.id}));var s=e.children.map((function(e){return n.renderElem(e)}));return r.a.createElement("div",{key:e.id,name:e.name,className:"list"},r.a.createElement(b,{child:e,count:u,onClick:n.handleClickOnItem,selected:e.id===c.id}),r.a.createElement("div",{className:"list-elems"},s))},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.buildings.map((function(t){return e.renderElem(t)}));return r.a.createElement("div",{className:"buildings"},t)}}]),t}(a.Component)),y=(n(9),n(19),function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.equipment,n=e.roomName,a=t.name,c=t.count;return r.a.createElement("div",{className:"equipment-item"},r.a.createElement("div",{className:"equipment-room"},n),r.a.createElement("div",{className:"equipment-name"},a),r.a.createElement("div",{className:"equipment-count"},c),r.a.createElement("div",{className:"buttons"},r.a.createElement("div",{className:"button button-edit"},r.a.createElement("i",{className:"fas fa-edit"})),r.a.createElement("div",{className:"button button-delete"},r.a.createElement("i",{className:"fas fa-trash"}))))}}]),t}(a.Component)),N=(n(20),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={currentEquipments:[]},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.equipments,a=t.selectedItem;if(a&&(a!==e.selectedItem||n!==e.equipments)){var r=E(a,n);this.setState({currentEquipments:r})}}},{key:"render",value:function(){var e,t=this.props.selectedItem;return t&&!t.children&&(e=r.a.createElement("div",{className:"plus"},r.a.createElement("i",{className:"fas fa-plus-circle"}))),r.a.createElement("div",{className:"equipments"},e,this.state.currentEquipments.map((function(e){var t=e.equipInfo,n=e.roomName;return t.map((function(e){return r.a.createElement(y,{equipment:e,key:e.id,roomName:n})}))})))}}]),t}(a.Component)),q=(n(21),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={buildings:[],equipments:[],selectedItem:0},n.itemSelect=function(e){console.info("selectedItem",e),n.setState({selectedItem:e})},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return t=e.sent,e.next=5,h();case 5:n=e.sent,this.setState({buildings:t,equipments:n});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.buildings,n=e.equipments,a=e.selectedItem;return r.a.createElement("div",{className:"container"},r.a.createElement(j,{buildings:t,equipments:n,itemSelect:this.itemSelect,selectedItem:a}),r.a.createElement(N,{buildings:t,equipments:n,selectedItem:a}))}}]),t}(a.Component));i.a.render(r.a.createElement(q,null),document.getElementById("root"))}],[[11,1,2]]]);
//# sourceMappingURL=main.a4862ff0.chunk.js.map